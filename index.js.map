{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/error.png","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nlet currentPage = 1;\n\nexport const searchImage = async (search, page = currentPage, perPage = 40) => {\n  const url = `https://pixabay.com/api/`;\n\n  try {\n    const response = await axios.get(url, {\n      params: {\n        key: '47161865-40d939b38272e547a09e56cd8',\n        q: search,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: perPage,\n        page: page,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n};\n\nexport const resetPage = () => {\n  currentPage = 1;\n};\n\nexport const nextPage = () => {\n  currentPage += 1;\n};","export const renderImages = images => {\n  return images\n    .map(\n      image => `\n    <li class='gallery-item'>\n      <a href=\"${image.largeImageURL}\">\n        <img alt=\"${image.tags}\" src=\"${image.webformatURL}\" class='gallery-image'/>\n      </a>\n      <ul class='list-info'>\n        <li class='item-info'>\n          <p class='title-info'>Likes</p>\n          <p class='count-info'>${image.likes}</p>\n        </li>\n        <li class='item-info'>\n          <p class='title-info'>Views</p>\n          <p class='count-info'>${image.views}</p>\n        </li>\n        <li class='item-info'>\n          <p class='title-info'>Comments</p>\n          <p class='count-info'>${image.comments}</p>\n        </li>\n        <li class='item-info'>\n          <p class='title-info'>Downloads</p>\n          <p class='count-info'>${image.downloads}</p>\n        </li>\n      </ul>\n    </li>\n    `\n    )\n    .join('');\n};\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEpSURBVHgBrZXtEcIgDIZTzp5/3URHcSPpJLpBXcVd+FPwiqQt1y+SUNv3DuUkvA+0SQQg5Jx7WOt8zsBYyudEmXsPuijg3bbtB1ipa/jQYQ+UZVmBpHjyprEvyBTGSjf52zwbssdchBxhTkI4c2vtTTJMxcwgw6RObZReXDycMSYBcTWuQX/6RqcMQpCmIOPNHbG30SKAgkjmU8AJBJ3PpQ5GOO2KCYVFGEaFa9J+EbCEDIAsc5SCTCkFPjWXlHWD2Jvw5MNP2b1HBEzN42OZvhMRwmURly1cCvfrszSlC41PxR6SKjQs3g4Qg6z9PpdBxsitIhWDXrPDcZCtWplHHQEhzY+AiOZ7IJz5qg5iWygK/wjfFwD+T18pdfXe37e0j07jTeTBPZYfWztI8097RKsAAAAASUVORK5CYII=\"","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport { searchImage, resetPage, nextPage } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport errorIcon from './img/error.png';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('ul.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet lightbox = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\niziToast.settings({\n  timeout: 4000,\n  position: 'topRight',\n});\n\nlet currentSearchText = '';\n\nconst createGallery = e => {\n  e.preventDefault();\n  gallery.innerHTML = '';\n  loader.style.display = 'block';\n  loadMoreBtn.style.display = 'none';\n  currentSearchText = e.target.elements.search.value.trim();\n\n  if (!currentSearchText) {\n    iziToast.error({\n      iconUrl: errorIcon,\n      iconColor: '#fff',\n      imageWidth: 24,\n      messageColor: '#fff',\n      message: 'Please write a query for search',\n    });\n    loader.style.display = 'none';\n    return;\n  }\n\n  resetPage();\n  fetchAndRenderImages(currentSearchText);\n};\n\nconst fetchAndRenderImages = searchText => {\n  searchImage(searchText)\n    .then(({ hits }) => {\n      if (hits.length === 0) {\n        iziToast.error({\n          iconUrl: errorIcon,\n          iconColor: '#fff',\n          imageWidth: 24,\n          messageColor: '#fff',\n          message: 'Sorry, there are no images matching your search query. Please try again!',\n        });\n        loader.style.display = 'none';\n        return;\n      }\n\n      const images = renderImages(hits);\n      gallery.innerHTML += images;\n      loader.style.display = 'none';\n      loadMoreBtn.style.display = 'block';\n      lightbox.refresh();\n      form.reset();\n      nextPage();\n    })\n    .catch(error => {\n      console.error('Error fetching images:', error);\n      iziToast.error({\n        iconUrl: errorIcon,\n        iconColor: '#fff',\n        imageWidth: 24,\n        messageColor: '#fff',\n        message: 'Error fetching images. Please try again later.',\n      });\n      loader.style.display = 'none';\n    });\n};\n\nconst loadMoreImages = () => {\n  fetchAndRenderImages(currentSearchText);\n};\n\nform.addEventListener('submit', createGallery);\nloadMoreBtn.addEventListener('click', loadMoreImages);"],"names":["currentPage","searchImage","search","page","perPage","url","axios","error","resetPage","nextPage","renderImages","images","image","errorIcon","form","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","iziToast","currentSearchText","createGallery","e","fetchAndRenderImages","searchText","hits","loadMoreImages"],"mappings":"owBAEA,IAAIA,EAAc,EAEX,MAAMC,EAAc,MAAOC,EAAQC,EAAOH,EAAaI,EAAU,KAAO,CAC7E,MAAMC,EAAM,2BAEZ,GAAI,CAaF,OAZiB,MAAMC,EAAM,IAAID,EAAK,CACpC,OAAQ,CACN,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUE,EACV,KAAMD,CACP,CACP,CAAK,GAEe,IACjB,OAAQI,EAAO,CACd,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACH,EAEaC,EAAY,IAAM,CAC7BR,EAAc,CAChB,EAEaS,EAAW,IAAM,CAC5BT,GAAe,CACjB,ECjCaU,EAAeC,GACnBA,EACJ,IACCC,GAAS;AAAA;AAAA,iBAEEA,EAAM,aAAa;AAAA,oBAChBA,EAAM,IAAI,UAAUA,EAAM,YAAY;AAAA;AAAA;AAAA;AAAA;AAAA,kCAKxBA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,kCAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,kCAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,kCAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,KAK5C,EACA,KAAK,EAAE,EC7BGC,EAAA,qjBCQTC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,YAAY,EAC7CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAChB,CAAC,EAEDC,EAAS,SAAS,CAChB,QAAS,IACT,SAAU,UACZ,CAAC,EAED,IAAIC,EAAoB,GAExB,MAAMC,EAAgBC,GAAK,CAOzB,GANAA,EAAE,eAAc,EAChBR,EAAQ,UAAY,GACpBC,EAAO,MAAM,QAAU,QACvBC,EAAY,MAAM,QAAU,OAC5BI,EAAoBE,EAAE,OAAO,SAAS,OAAO,MAAM,OAE/C,CAACF,EAAmB,CACtBD,EAAS,MAAM,CACb,QAASP,EACT,UAAW,OACX,WAAY,GACZ,aAAc,OACd,QAAS,iCACf,CAAK,EACDG,EAAO,MAAM,QAAU,OACvB,MACD,CAEDR,IACAgB,EAAqBH,CAAiB,CACxC,EAEMG,EAAuBC,GAAc,CACzCxB,EAAYwB,CAAU,EACnB,KAAK,CAAC,CAAE,KAAAC,KAAW,CAClB,GAAIA,EAAK,SAAW,EAAG,CACrBN,EAAS,MAAM,CACb,QAASP,EACT,UAAW,OACX,WAAY,GACZ,aAAc,OACd,QAAS,0EACnB,CAAS,EACDG,EAAO,MAAM,QAAU,OACvB,MACD,CAED,MAAML,EAASD,EAAagB,CAAI,EAChCX,EAAQ,WAAaJ,EACrBK,EAAO,MAAM,QAAU,OACvBC,EAAY,MAAM,QAAU,QAC5BC,EAAS,QAAO,EAChBJ,EAAK,MAAK,EACVL,GACN,CAAK,EACA,MAAMF,GAAS,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7Ca,EAAS,MAAM,CACb,QAASP,EACT,UAAW,OACX,WAAY,GACZ,aAAc,OACd,QAAS,gDACjB,CAAO,EACDG,EAAO,MAAM,QAAU,MAC7B,CAAK,CACL,EAEMW,EAAiB,IAAM,CAC3BH,EAAqBH,CAAiB,CACxC,EAEAP,EAAK,iBAAiB,SAAUQ,CAAa,EAC7CL,EAAY,iBAAiB,QAASU,CAAc"}