{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport const createGalleryCardTemplate = imginfo => {\n  return `\n  <li class=\"gallery-item\">\n    <a class=\"gallery-link\" href=\"${imginfo.largeImageURL}\">\n      <img class=\"gallery-image\" src=\"${imginfo.webformatURL}\" alt=\"${imginfo.tags}\" />\n    </a>\n    <div class=\"img-details\">\n      <p class=\"detail-item\"><b>Likes:</b> ${imginfo.likes}</p>\n      <p class=\"detail-item\"><b>Views:</b> ${imginfo.views}</p>\n      <p class=\"detail-item\"><b>Comments:</b> ${imginfo.comments}</p>\n      <p class=\"detail-item\"><b>Downloads:</b> ${imginfo.downloads}</p>\n    </div>\n  </li>`;\n};\n\nexport const initializeLightbox = () => {\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n  lightbox.refresh();\n};\n","import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/?';\nconst API_KEY = '47161865-40d939b38272e547a09e56cd8';\n\nexport const getAxiosPhotos = async (searchedQuery, page, perPage) => {\n  try {\n    const urlParams = new URLSearchParams({\n      key: API_KEY,\n      q: searchedQuery,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      per_page: perPage,\n      page: page,\n    });\n\n    const response = await axios.get(`${BASE_URL}${urlParams}`);\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching data from Pixabay:', error);\n    return { hits: [], totalHits: 0 };\n  }\n};\n","import { createGalleryCardTemplate, initializeLightbox } from './js/render-functions';\nimport { getAxiosPhotos } from './js/pixabay-api';\nimport iziToast from 'izitoast';\n\n/* ===================== DOM Elements ===================== */\nconst formEl = document.querySelector('.js-page-form');\nconst galleryEl = document.querySelector('.js-gallery');\nconst loaderEl = document.querySelector('.js-loader');\nconst loadMoreBtnEl = document.querySelector('.load-more-btn-js');\n\n/* ===================== Global Params ===================== */\nconst params = {\n  searchedValue: '',\n  page: 1,\n  total: 0,\n  perPage: 18,\n};\n\n/* ===================== Event Handlers ===================== */\nconst onFormElSubmit = async event => {\n  event.preventDefault();\n  params.searchedValue = formEl.elements.user_query.value.trim();\n\n  if (!params.searchedValue) {\n    showErrorMessage('Please enter a valid search query!');\n    clearGallery();\n    return;\n  }\n\n  params.page = 1;\n  showLoader();\n\n  try {\n    const data = await getAxiosPhotos(params.searchedValue, params.page, params.perPage);\n\n    if (!data.hits || data.hits.length === 0) {\n      showErrorMessage('Sorry, there are no images matching your search query. Please try again!');\n      clearGallery();\n      return;\n    }\n\n    params.total = data.totalHits;\n    updateGallery(data.hits);\n    checkBtnStatus();\n  } catch (error) {\n    showErrorMessage('Something went wrong. Please try again!');\n  } finally {\n    hideLoader();\n  }\n};\n\nconst onloadMoreBtnElClick = async () => {\n  hideloadBtn();\n  showLoader();\n\n  params.page += 1;\n  try {\n    const data = await getAxiosPhotos(params.searchedValue, params.page, params.perPage);\n    updateGallery(data.hits, true);\n    checkBtnStatus();\n    scrollPage();\n  } catch (error) {\n    showErrorMessage('Something went wrong. Please try again!');\n  } finally {\n    hideLoader();\n  }\n};\n\n/* ===================== Helper Functions ===================== */\nconst showLoader = () => loaderEl.classList.remove('is-hidden');\nconst hideLoader = () => loaderEl.classList.add('is-hidden');\nconst showloadBtn = () => loadMoreBtnEl.classList.remove('is-hidden');\nconst hideloadBtn = () => loadMoreBtnEl.classList.add('is-hidden');\n\nconst showErrorMessage = message => {\n  iziToast.error({ message, position: 'topRight' });\n};\n\nconst clearGallery = () => {\n  galleryEl.innerHTML = '';\n  formEl.reset();\n  hideloadBtn();\n};\n\nconst updateGallery = (images, append = false) => {\n  const galleryCardsTemplate = images.map(imgDetails => createGalleryCardTemplate(imgDetails)).join('');\n  if (append) {\n    galleryEl.insertAdjacentHTML('beforeend', galleryCardsTemplate);\n  } else {\n    galleryEl.innerHTML = galleryCardsTemplate;\n  }\n  initializeLightbox();\n};\n\nconst checkBtnStatus = () => {\n  const maxPage = Math.min(Math.ceil(params.total / params.perPage), Math.ceil(500 / params.perPage));\n  params.page >= maxPage ? hideloadBtn() : showloadBtn();\n};\n\nconst scrollPage = () => {\n  if (!galleryEl.firstElementChild) return;\n  const info = galleryEl.firstElementChild.getBoundingClientRect();\n  scrollBy({ behavior: 'smooth', top: info.height * 2 });\n};\n\n/* ===================== Event Listeners ===================== */\nformEl.addEventListener('submit', onFormElSubmit);\nloadMoreBtnEl.addEventListener('click', onloadMoreBtnElClick);\n"],"names":["createGalleryCardTemplate","imginfo","initializeLightbox","SimpleLightbox","BASE_URL","API_KEY","getAxiosPhotos","searchedQuery","page","perPage","urlParams","axios","error","formEl","galleryEl","loaderEl","loadMoreBtnEl","params","onFormElSubmit","event","showErrorMessage","clearGallery","showLoader","data","updateGallery","checkBtnStatus","hideLoader","onloadMoreBtnElClick","hideloadBtn","scrollPage","showloadBtn","message","iziToast","images","append","galleryCardsTemplate","imgDetails","maxPage","info"],"mappings":"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"}